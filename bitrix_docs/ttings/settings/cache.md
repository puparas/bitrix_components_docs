# Автокеширование

Документация для разработчиков

[Документация для разработчиков](https://dev.1c-bitrix.ru/api_help/)
[Документация по D7](https://dev.1c-bitrix.ru/api_d7/)
[Документация по REST](https://dev.1c-bitrix.ru/rest_help/)
[Пользовательская документация](https://dev.1c-bitrix.ru/user_help/)

Темная тема

[Основные сведения](/user_help/index.php)
[Реализация и системные требования](/user_help/reqintro.php)

[Справочная система и документация](/user_help/help/index.php)

[Контент](/user_help/content/index.php)

[Сайты 24](/user_help/sites24/index.php)

[Маркетинг](/user_help/marketing/index.php)

[Магазин](/user_help/store/index.php)

[Клиенты](/user_help/clients/index.php)

[Сервисы](/user_help/service/index.php)

[Веб-аналитика](/user_help/statistic/index.php)

[Marketplace](/user_help/marketplace/index.php)

[Настройки](/user_help/settings/index.php)

[Адреса и местоположения](/user_help/settings/location/index.php)

[Избранное](/user_help/settings/favorites/index.php)

[Пользователи](/user_help/settings/users/index.php)

[Поиск](/user_help/settings/search/index.php)

[Проактивная защита](/user_help/settings/security/index.php)

[DAV (КП)](/user_help/settings/dav/index.php)

[Push and Pull](/user_help/settings/pull/index.php)

[REST API](/user_help/settings/rest_api/index.php)

[Валюты](/user_help/settings/currency/index.php)

[Веб-кластер](/user_help/settings/cluster/index.php)

[Веб-сервисы](/user_help/settings/webservice/index.php)

[Диск (КП)](/user_help/settings/disk/index.php)

[Конвертер файлов (КП)](/user_help/settings/transformer/index.php)

[Коннекторы для внешних мессенджеров (КП)](/user_help/settings/imconnector/index.php)

[Открытые линии (КП)](/user_help/settings/imopenlines/index.php)

[Распознавание лиц (КП)](/user_help/settings/faceid/index.php)

[Сервер конвертации файлов (КП)](/user_help/settings/transformercontroller/index.php)

[Служба сообщений](/user_help/settings/message_service/index.php)

[Телефония](/user_help/settings/voximplant/index.php)

[Облако 1С-Битрикс](/user_help/settings/bitrixcloud/index.php)

[Облачные хранилища](/user_help/settings/clouds/index.php)

[AD/LDAP интеграция](/user_help/settings/ldap/index.php)

[Перевод](/user_help/settings/translate/index.php)

[XMPP сервер (КП)](/user_help/settings/xmpp/index.php)

[Настройки продукта (главный модуль)](/user_help/settings/settings/index.php)

[Настройки главного модуля](/user_help/settings/settings/settings.php)
[Модули](/user_help/settings/settings/module_admin.php)
[Автокеширование](/user_help/settings/settings/cache.php)
[Список мастеров](/user_help/settings/settings/wizard_list.php)
[Импорт мастера](/user_help/settings/settings/wizard_load.php)
[Пользовательские поля](/user_help/settings/settings/userfield_admin.php)
[Создание и редактирование пользовательского поля](/user_help/settings/settings/userfield_edit.php)
[CAPTCHA](/user_help/settings/settings/captcha.php)
[Агенты](/user_help/settings/settings/agent_list.php)
[Создание и редактирование агента](/user_help/settings/settings/agent_edit.php)
[Геолокация](/user_help/settings/settings/geoip_handlers_list.php)
[Соглашения и список согласий](/user_help/settings/settings/agreement_admin.php)
[Создание соглашения](/user_help/settings/settings/agreement_edit.php)

[Сайты](/user_help/settings/settings/sites/index.php)

[Языковые параметры](/user_help/settings/settings/lang_parametrs/index.php)

[Почтовые и СМС события](/user_help/settings/settings/mail_events/index.php)

[Обработка адресов](/user_help/settings/settings/urlrewrite/index.php)

[Интерфейс](/user_help/settings/settings/user_settings/index.php)

[Композитный сайт](/user_help/settings/settings/composite/index.php)

[Инструменты](/user_help/settings/utilities/index.php)

[Монитор производительности](/user_help/settings/perfmon/index.php)

[ЧатБоты (КП)](/user_help/settings/imbot/index.php)

[Компрессия](/user_help/settings/compression/index.php)

[Компоненты](/user_help/components/index.php)

[Описание компонентов решений](/user_help/description_decisions/index.php)

[Дополнительно](/user_help/additional/index.php)

[Настройки](/user_help/settings/index.php)

[Настройки продукта (главный модуль)](/user_help/settings/settings/index.php)

Автокеширование

# Автокеширование

Закладки

### Кеширование компонентов

Использование технологии **Автокеширования** позволяет быстро подготовить сайт и компоненты проекта к работе в условиях стрессовых нагрузок или адаптировать сайт к работе на виртуальном хостинге. Методология разработки компонентов 2.0 включает обязательное требование поддержки технологии **Автокеширования** для разработчиков.

На странице **Автокеширование** (*Настройки > Настройки продукта > Автокеширование*) можно включить/отключить автокеширование на сайте с помощью кнопки **Включить автокеширование**/**Выключить автокеширование**.

**Примечание:** При включении режима автокеширования компонентов, компоненты с настройкой кеширования **Авто + Управляемое** будут переведены в режим работы с кешированием.

Суть автокеширования заключается в том, что все динамические компоненты, которые используются для создания веб-страниц, получили встроенную поддержку управления кешированием. Для использования новой технологии нетехническому специалисту достаточно включить автокеширование одной кнопкой на административной панели. При этом все компоненты, у которых был включен режим, автокеширования создадут кеши и полностью перейдут в режим работы без запросов к базе данных.

**Обратите внимание**: При использовании режима "Автокеширования", обновление информации, выводимой компонентами, происходит в соответствии с параметрами отдельных компонентов.

Для того чтобы обновить содержимое закешированных объектов на странице, вы можете:

1. Перейти на нужную страницу и обновить ее содержимое, используя кнопку **Сбросить кеш** на панели инструментов:

   ![Кнопка "Сбросить кеш"](/images/admin_start/admin_base/other/page_cache_11.png)

   **Примечание 1:** Когда сбрасываете кеш кнопкой **Обновить кеш страницы**, имейте в виду, что компонент может использовать привязку к группам для хранения кеша (опция **Учитывать права доступа**) и тогда кеш сбросится только у тех пользователей, которые входят в те же группы, что и вы. Это касается и администратора сайта.

   ![Опция "Учитывать права доступа"](/images/admin_start/admin_base/other/cache_groups.png)

   При установленной опции кеш будет разный для разных групп пользователей, в то время как при не установленной опции кеш будет общим.

   **Пример:** Незарегистрированные пользователи будут по-прежнему видеть не актуальную страницу после нажатия кнопки **Обновить кеш страницы** при установленной опции **Учитывать права доступа**.

   **Примечание 2:** Пункт меню **Обновить кеш компонентов** кнопки **Сбросить кеш** заставляет все компоненты, расположенные на странице, сбросить свой кеш. Кнопка (пункт) **Обновить кеш страницы** сбрасывает кеш всей страницы.
2. В режиме **Правки сайта** использовать кнопки для очистки кеша в панели отдельных компонентов.

   ![Очистка кеша отдельных компонентов](/images/admin_start/admin_base/other/comp_cache_11.png)
3. Использовать автоматический сброс кеша по истечении времени кеширования, для чего в настройках компонента выбрать режим кеширования **Кешировать** или **Авто + Управляемое**.
4. Использовать автоматический сброс кеша при изменении данных, для чего в настройках компонента выбрать режим кеширования **Авто + Управляемое**. Подробнее про управляемый кеш [см. ниже](#cache_dependencies).
5. Перейти к настройкам выбранных компонентов и перевести их в режим работы без кеширования.

   ![Настройки кеширования компонента](/images/admin_start/admin_base/other/cachetype_selector.png)

Компоненты с настройкой кеширования **Авто + Управляемое** автоматически обновляют кеш в течение заданного времени или при изменении данных.

Компоненты с настройкой кеширования **Кешировать** и временем кеширования больше нуля, всегда работают в режиме кеширования.

Компоненты с настройкой кеширования **Не кешировать** или временем кеширования равным нулю, всегда работают без кеширования.

### Управляемый кеш

Для включения/отключения управляемого кеширования используйте кнопку **Включить управляемый кеш**/**Выключить управляемый кеш (не рекомендуется)**.

Технология управляемого кеширования **Сache Dependencies** автоматически обновляет кеш компонентов при изменении данных. Если управляемое кеширование включено, вам не потребуется вручную обновлять кеш компонентов при изменении новостей или товаров, изменения сразу станут видны посетителям сайта.

**Примечание**: Не все компоненты могут поддерживать управляемое кеширование.

**Примечание**: Подсказка, расположенная ниже настроек кеширования в параметрах компонента отображает состояние текущих настроек ядра.

![](/upload/user_help/settings/cache_tip.png)

Ссылка Изменить настройки кеширования позволяет перейти на страницу **Настройки кеширования** в административном разделе сайта.

**Примечание:** Технология **Сache Dependencies**, как и весь продукт, может хранить кеш как в файлах, так и используя **Memcached**, **APC**, **eAccelerator**. Для этого достаточно [изменить один из конфигурационных параметров](http://dev.1c-bitrix.ru/api_help/perfomance/perfmon_panel.php).

### HTML кеш

**Внимание!** С версии 16.0.14 данная закладка отсутствует. Вместо неё используется [Композитный сайт](/user_help/settings/settings/composite/composite_settings.php).

Для включения/отключения HTML кеша используйте кнопку **Включить HTML кеширование**/**Выключить HTML кеширование**.

| Поле | Описание |
| --- | --- |
| Маска включения | Укажите файлы и типы файлов, которые будут обрабатываться HTML кешем. |
| Маска исключения | Укажите файлы и типы файлов, которые **не** будут обрабатываться HTML кешем. |
| Дисковая квота (мегабайт) | Дисковая квота кеша (задается в мегабайтах). |

Для сохранения настроек нажмите кнопку **Сохранить настройки HTML кеша**.

Для установки значений параметров равными значениям по умолчанию нажмите кнопку **Установить настройки по умолчанию**.

**Внимание!** Есть и ограничения в использовании. В частности, мы **не советуем** включать HTML кеш (или включать обдуманно по разделам) для редакций, которые содержат веб-аналитику и модуль рекламы.

Механизм HTML-кеширования лучше всего включить на какой-нибудь редко изменяющийся раздел с регулярным посещением анонимных посетителей, так как при включенном HTML-кешировании происходят следующие процессы:

* механизмом HTML-кеша обрабатываются только страницы, не указанные в маске исключения и указанные в маске включения;
* если на такие страницы заходит не авторизованный пользователь, то выполняется проверка существования файла кеша и если таковой найден, то выдается страница из кеша, не задействуя никакие модули продукта; например, не будет работать модуль статистики (не засчитаются хиты этого пользователя), модуль рекламы, главный и другие модули;
* при этом если на момент включения кеша был установлен модуль компрессии, то страница будет отдаваться в сжатом виде;
* если страница в кеше не найдена, то код исполняется в обычном режиме; когда страница полностью сформирована, ее копия сохраняется в HTML-кеш;

Очистка кеша:

* если сохраняемый объем приводит к превышению дисковой квоты кеша, то кеш полностью очищается;
* так же полная очистка кеша происходит при любом изменении данных в административной части системы;
* если в публичной части сайта происходит POST данных (например, добавление комментария или голосование), то сбрасывается соответствующая часть кеша;

Из всего вышесказанного следует, что:

* не ведется учет статистики;
* модуль рекламы будет работать только в момент создания кеша (это не относится к внешней динамической рекламе (Begun и пр.));
* необходимо обязательно задать дисковую квоту во избежание DoS-атаки по дисковому пространству;
* после включения механизма HTML-кеширования необходимо проверить весь функционал раздела, к которому применен кеш (например, может не сработать публикация комментариев со старыми шаблонами блогов);

### Очистка файлов кеша

Эта закладка используется для удаления файлов кеша, содержащих устаревшую или сбойную информацию.

| Поле | Описание |
| --- | --- |
| Только устаревшие | Файлы, время жизни которых закончилось. |
| Все | Все файлы кеша. |
| Меню | Меню может быть закешировано, если происходят проверки доступа к различным пунктам меню, разделам. Данный пункт позволяет очистить этот кеш. |
| Весь управляемый | Все файлы раздела **/bitrix/managed\_cache/**. |
| Все страницы HTML кеша | Удаление страниц HTML кеша. |

Для удаления выбранных файлов нажмите кнопку **Очистить**.

После удаления файлов кеша выводимые данные будут обновлены до актуального состояния. Новые файлы кеша будут создаваться постепенно по мере обращений к страницам с закешированными областями.

### Смотрите также

* [Настройки кеширования (учебный курс "Администратор. Базовый")](https://dev.1c-bitrix.ru/learning/course/index.php?COURSE_ID=35&CHAPTER_ID=02129)
* [Автокеширование (учебный курс "Разработчик Bitrix Framework")](https://dev.1c-bitrix.ru/learning/course/?COURSE_ID=43&LESSON_ID=2127)

Новинки документации в соцсетях:

#### Пользовательские комментарииПомните, что Пользовательские комментарии, несмотря на модерацию, не являются официальной документацией. Ответственность за их использование несет сам пользователь. Также Пользовательские комментарии не являются местом для обсуждения функционала. По подобным вопросам обращайтесь на [форумы](http://dev.1c-bitrix.ru/community/forums/group1/).

© «Битрикс», 2001-2025, «1С-Битрикс», 2025

Наверх