| Поле | Описание |
| --- |

|
| Активна | Статус активности рассылки. Если рассылка активна, пользователи могут подписаться на нее. |
| Выводить в списке публичных рассылок |

|
| Показывать рассылку на сайте | Сайт рассылки. |
| \*Название |

|
| Сортировка | Вес сортировки списка рассылки. Чем больше это значение, тем выше в списке, показываемом посетителям, располагается эта рассылка. |
| Символьный код |

|
| Описание для подписчиков (до 2000 симв.) | Описание рассылки, отображаемое посетителям сайта. Старайтесь создавать описание, краткое по объему и емкое по содержанию. |
| Автоматическая (выпуски формируются по расписанию и на основании шаблонов) |

|

\* - поле, обязательное для заполнения.

### Закладка Автоматическая генерация

Вкладка доступна только при создании/редактировании автоматической рассылки.

| Поле | Описание |
| --- |

|
| Расписание | |
| \*Время последней генерации выпуска (DD.MM.YYYY HH:MI:SS) |

|
| Дни месяца (например 1,10-20,25) | Список чисел месяца, по которым будет происходить автоматическая генерация выпусков рассылки. Возможно указание как отдельных дат через запятую (например: 1,8,10), так и диапазона дат (например: 19-25, 27-30). |
| Дни недели |

|
| \*Время (например 9:00,18:00) | Время, когда будет автоматически генерироваться выпуск рассылки. Возможно указание списка значений (например: 8:00, 16:00, 24:00). |
| **Шаблон для автоматической генерации выпусков** |

|
| \*Доступные шаблоны | Выбор шаблонов из доступных, на основании которого будут автоматически генерироваться выпуски данной рассылки.   Если доступные шаблоны отсутствуют, то будет выведено сообщение: **Не найдено ни одного шаблона для автоматической генерации выпусков**.   Шаблоны для автоматической генерации выпусков могут быть созданы с использованием **API** функций продукта (см. класс [CPostingTemplate](http://dev.1c-bitrix.ru/api_help/subscribe/classes/cpostingtemplate/index.php)). По умолчанию шаблоны для автоматической генерации выпусков лежат в директории `/bitrix/php_interface/subscribe/templates`. Для поддержки версионности при разработке сайта в ядре 14.0.1 была введена поддержка папки [/local](https://dev.1c-bitrix.ru/learning/course/?COURSE_ID=43&LESSON_ID=5119#local), что облегчает совместную разработку сайта.   С версии 16.5 модуля "Подписка, Рассылки" шаблоны для автоматической генерации выпусков можно хранить в папке `/local/php_interface/subscribe/templates`. Приоритет всегда у папки `/local` перед `/bitrix`, т.е если в`/local/php_interface/subscribe/templates` и`/bitrix/php_interface/subscribe/templates` будут находиться шаблоны с одинаковым названием, то шаблон будет выбираться из папки `/local`. |
| Поля письма |

|
| \*От кого | Адрес отправителя, который будет подставляться в поле **От кого** автоматически сгенерированных сообщений рассылки.   По умолчанию поле имеет значение, заданное на странице настроек модуля **Рассылки**. |

\* - поле, обязательное для заполнения.

**Примечание:** Отправка выпуска автоматической рассылки будет производиться только в том случае, если выпуск содержит данные, выбранные с использованием компонентов в динамическом шаблоне.
  
Если информация, необходимая для формирования выпуска за указанный период отсутствует, то рассылка производиться не будет.

Новинки документации в соцсетях:

#### Пользовательские комментарииПомните, что Пользовательские комментарии, несмотря на модерацию, не являются официальной документацией. Ответственность за их использование несет сам пользователь. Также Пользовательские комментарии не являются местом для обсуждения функционала. По подобным вопросам обращайтесь на [форумы](http://dev.1c-bitrix.ru/community/forums/group1/).

| 1  **Роберт Басыров** 29.05.2009 15:23:22 |
| --- |
| Для добавления в автоматически генерируемую рассылку ссылку на отписку от нее необходимо сделать следующее:  В файл */bitrix/php\_interface/init.php* добавить:  |

| | --- | | ``` // регистрируем обработчик AddEventHandler("subscribe", "BeforePostingSendMail", Array("MyClass2", "BeforePostingSendMailHandler"));class MyClass2 {     // создаем обработчик события "BeforePostingSendMail"     function BeforePostingSendMailHandler($arFields)     {    $USER_NAME = "Подписчик";    //Попробуем найти подписчика.    $rs = CSubscription::GetByEmail($arFields["EMAIL"]);    if($ar = $rs->Fetch())    {       if(intval($ar["USER_ID"]) > 0)       {          $rsUser = CUser::GetByID($ar["USER_ID"]);          if($arUser = $rsUser->Fetch())          {             $USER_NAME = $arUser["LAST_NAME"]." ".$arUser["NAME"]." ".$arUser["SECOND_NAME"];          }       }    }    $arFields["BODY"] = str_replace("#NAME#", $USER_NAME, $arFields["BODY"]);    $arFields["BODY"] = str_replace("#CONFIRM_CODE#", $ar["CONFIRM_CODE"], $arFields["BODY"]);    $arFields["BODY"] = str_replace("#ID#", $ar["ID"], $arFields["BODY"]);    return $arFields;     } }  ``` |  в файл */bitrix/php\_interface/subscribe/templates/news/tem plate.php* добавить:  | Код | | --- | | ``` Отписаться от рассылки: <a href="http://www.domen.ru/subscribe/subscr_...</a>  ``` | |
|  |

| 1  **Роберт Басыров** 19.05.2009 10:40:20 |
| --- |
| Иногда возникает необходимость прикрепления определенного файла к автоматической рассылке. Например, автоматическая рассылка прайс-листов. Задачу можно решить через Cron, но если есть необходимость совместить рассылку с информацией с сайта, то лучше это реализовать изменением шаблона рассылки. Для этого надо в шаблон добавить массив файлов, которые надо отправить.  Пример кода:   |

| | --- | | return array(                  "SUBJECT"=>$SUBSCRIBE\_TEMPLATE\_RUB RIC["NAME"]                  ,"BODY\_TYPE"=>"html"                  ,"CHARSET"=>"Windows-1251"                  ,"DIRECT\_SEND"=>"Y"                  ,"FROM\_FIELD"=>$SUBSCRIBE\_TEMPLATE\_RUBRIC["FROM\_FIELD"]                  ,"FILES"=>Array("0"=>CFile::MakeFileArray("/path/to/file/file.zip"))  ); | |
|  |

``` // регистрируем обработчик AddEventHandler("subscribe", "BeforePostingSendMail", Array("MyClass2", "BeforePostingSendMailHandler"));class MyClass2 {     // создаем обработчик события "BeforePostingSendMail"     function BeforePostingSendMailHandler($arFields)     {    $USER_NAME = "Подписчик";    //Попробуем найти подписчика.    $rs = CSubscription::GetByEmail($arFields["EMAIL"]);    if($ar = $rs->Fetch())    {       if(intval($ar["USER_ID"]) > 0)       {          $rsUser = CUser::GetByID($ar["USER_ID"]);          if($arUser = $rsUser->Fetch())          {             $USER_NAME = $arUser["LAST_NAME"]." ".$arUser["NAME"]." ".$arUser["SECOND_NAME"];          }       }    }    $arFields["BODY"] = str_replace("#NAME#", $USER_NAME, $arFields["BODY"]);    $arFields["BODY"] = str_replace("#CONFIRM_CODE#", $ar["CONFIRM_CODE"], $arFields["BODY"]);    $arFields["BODY"] = str_replace("#ID#", $ar["ID"], $arFields["BODY"]);    return $arFields;     } }  ```

``` Отписаться от рассылки: <a href="http://www.domen.ru/subscribe/subscr_...</a>  ```