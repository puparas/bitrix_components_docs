# Фотогалерея 2.0 (комплексный компонент)

Документация для разработчиков

[Документация для разработчиков](https://dev.1c-bitrix.ru/api_help/)
[Документация по D7](https://dev.1c-bitrix.ru/api_d7/)
[Документация по REST](https://dev.1c-bitrix.ru/rest_help/)
[Пользовательская документация](https://dev.1c-bitrix.ru/user_help/)

Темная тема

[Основные сведения](/user_help/index.php)
[Реализация и системные требования](/user_help/reqintro.php)

[Справочная система и документация](/user_help/help/index.php)

[Контент](/user_help/content/index.php)

[Сайты 24](/user_help/sites24/index.php)

[Маркетинг](/user_help/marketing/index.php)

[Магазин](/user_help/store/index.php)

[Клиенты](/user_help/clients/index.php)

[Сервисы](/user_help/service/index.php)

[Веб-аналитика](/user_help/statistic/index.php)

[Marketplace](/user_help/marketplace/index.php)

[Настройки](/user_help/settings/index.php)

[Компоненты](/user_help/components/index.php)

[CRM (КП)](/user_help/components/crm/index.php)

[Корпоративный портал (КП)](/user_help/components/intranet/index.php)

[Сайты 24](/user_help/components/landing/index.php)

[Контент](/user_help/components/content/index.php)

[Агрегатор библиотек документов (КП)](/user_help/components/content/webdav/index.php)

[Задачи 2.0 (КП)](/user_help/components/content/tasks/index.php)

[Статьи и новости](/user_help/components/content/articles_and_news/index.php)

[Фотогалерея](/user_help/components/content/photogallery/index.php)

[Фотогалерея 2.0](/user_help/components/content/photogallery2/index.php)

[Фотогалерея 2.0 (комплексный компонент)](/user_help/components/content/photogallery2/photogallery.php)
[Фотогалерея 2.0 (многопользовательская) (комплексный компонент)](/user_help/components/content/photogallery2/photogallery_user_composite.php)
[Альбом](/user_help/components/content/photogallery2/photogallery_section.php)
[Альбом (список)](/user_help/components/content/photogallery2/photogallery_section_list.php)
[Панель](/user_help/components/content/photogallery2/photogallery_user.php)
[Фотогалерея (редактирование)](/user_help/components/content/photogallery2/photogallery_gallery_edit.php)
[Фотогалерея (список)](/user_help/components/content/photogallery2/photogallery_gallery_list.php)
[Фотогалерея (шаблоны)](/user_help/components/content/photogallery2/photogallery_interface.php)
[Flash-слайдшоу](/user_help/components/content/photogallery2/photogallery_imagerotator.php)
[Альбом (редактирование обложки)](/user_help/components/content/photogallery2/photogallery_section_edit_icon.php)
[Альбом (редактирование)](/user_help/components/content/photogallery2/photogallery_section_edit.php)
[Список фото (со слайдером)](/user_help/components/content/photogallery2/photogallery_detail_list_ex.php)
[Фото](/user_help/components/content/photogallery2/photogallery_detail.php)
[Фото (загрузка)](/user_help/components/content/photogallery2/photogallery_upload.php)
[Фото (комментарии)](/user_help/components/content/photogallery2/photogallery_detail_comment.php)
[Фото (редактирование)](/user_help/components/content/photogallery2/photogallery_detail_edit.php)
[Фото (список)](/user_help/components/content/photogallery2/photogallery_detail_list.php)

[Каталог](/user_help/components/content/catalog/index.php)

[Универсальные списки](/user_help/components/content/lists/index.php)

[Google Maps](/user_help/components/content/google_maps/index.php)

[Highload инфоблоки](/user_help/components/content/highload/index.php)

[RSS](/user_help/components/content/rss/index.php)

[Wiki](/user_help/components/content/wiki/index.php)

[Валюты](/user_help/components/content/currency/index.php)

[Добавление элементов](/user_help/components/content/adding/index.php)

[Инфоблоки](/user_help/components/content/infoblocks/index.php)

[Календарь событий](/user_help/components/content/calendar/index.php)

[Карта сайта](/user_help/components/content/sitemap/index.php)

[Медиа](/user_help/components/content/media/index.php)

[Яндекс.Карты](/user_help/components/content/yandex_map/index.php)

[Обмен с 1С](/user_help/components/content/1c_exchange/index.php)

[Социальные сервисы](/user_help/components/content/social_services/index.php)

[Сервисы](/user_help/components/services/index.php)

[Общение](/user_help/components/obschenie/index.php)

[Магазин](/user_help/components/magazin/index.php)

[Служебные](/user_help/components/sluzhebnie/index.php)

[Описание компонентов решений](/user_help/description_decisions/index.php)

[Дополнительно](/user_help/additional/index.php)

[Компоненты](/user_help/components/index.php)

[Контент](/user_help/components/content/index.php)

[Фотогалерея 2.0](/user_help/components/content/photogallery2/index.php)

Фотогалерея 2.0 (комплексный компонент)

# Фотогалерея 2.0 (комплексный компонент)

Комплексный компонент **Фотогалерея 2.0** позволяет получить полнофункциональную фотогалерею,
создавая физически только одну страницу.

### Описание **photogallery**

Комплексный компонент **Фотогалерея 2.0** позволяет получить полнофункциональную фотогалерею,
создавая физически только одну страницу.

Настройки компонента дают возможность гибко управлять параметрами фотогалереи:

* организовать многопользовательскую фотогалерею;
* создавать любое количество альбомов и загружать неограниченное количество фотографий;
* ограничить максимальный размер загружаемого файла;
* определять параметры фотографий при просмотре в различных режимах;
* настраивать голосование, отзывы, теги и т.д.

**Внимание!** Компонент поддерживает два режима настройки: **простой** и **расширенный**. Расширенный предоставляет более обширные средства настройки.

Компонент стандартный и входит в дистрибутив модуля.

Компонент содержит два шаблона: **.default** и **old**.

В визуальном редакторе компонент находится в *Компоненты > Контент > Фотогалерея 2.0*.

Компонент относится к модулю [Фотогалерея](/user_help/content/iblock/photogallery/index.php).

### Параметры. Простой режим

|  |  |  |
| --- | --- | --- |
| **Поле** | **Параметр** | **Описание** |
| **Основные параметры** | | |
| Использовать простой режим настройки | **USE\_LIGHT\_VIEW** | [Y|N] При отмеченной опции будет использоваться простой режим настройки фотогалереи (значения остальных параметров будут по умолчанию).|  |  |  | | --- | --- | --- | | Тип инфоблока | **IBLOCK\_TYPE** | Указывается один из созданных в системе типов информационных блоков. | | Инфоблок | **IBLOCK\_ID** | Для выбранного типа инфоблоков указывается идентификатор информационного блока, фотографии из которого будут выводиться. | | Путь к профилю пользователя | **PATH\_TO\_USER** | Указывается шаблон пути к профилю пользователя. | | Сортировать фотографии в альбоме перетаскиванием | **DRAG\_SORT** | [Y|N] При отмеченной опции можно сортировать фотографии в альбоме перетаскиванием с помощью мыши. | | **Настройки отзывов** | | | | Разрешить отзывы | **USE\_COMMENTS** | [Y|N] При отмеченной опции будет доступен функционал отзывов, станут активны дополнительные поля    Дополнительные поля:  |  |  |  | | --- | --- | --- | | Компонент комментариев | **COMMENTS\_TYPE** | Указывается компонент, с помощью которого будут добавляться комментарии:  * **Блоги** (**blog**); * **Форум** (**forum**).  Если указать **Блоги**, то необходимо настроить следующие параметры: **BLOG\_URL**, **PATH\_TO\_BLOG**.   Если указать **Форум**, то необходимо настроить параметр **FORUM\_ID**. | | Блог для комментариев | **BLOG\_URL** | Указывается блог, в котором будут храниться комментарии. | | Путь к блогу | **PATH\_TO\_BLOG** | Указывается путь к главной странице блога. | | ID форума для отзывов | **FORUM\_ID** | Указывается один из созданных в системе форумов, который будет использован для комментариев. | | Отображение имени | **NAME\_TEMPLATE** | Указывается шаблон для отображения ФИО комментирующего пользователя. По умолчанию - значение **Формат сайта** (т.е используются значение **Формат имени**, указанное в закладке **Параметры** страницы [Редактирование сайта](/user_help/settings/settings/sites/site_edit.php)). Указав пункт **другое->**, можно задать свой шаблон. Допустимы шаблоны: **#NAME#** - имя, **#LAST\_NAME#** - фамилия, **#SECOND\_NAME#** - отчество, **#NAME\_SHORT#**, **#LAST\_NAME\_SHORT#**, **#SECOND\_NAME\_SHORT#** - сокращенные до одной буквы имя, фамилия и отчество. | | | **Управление адресами страниц** | | | | Включить поддержку ЧПУ | **SEF\_MODE** | [Y|N] При отмеченной опции будет включена поддержка ЧПУ.    Если режим поддержки ЧПУ **включен**, то необходимо настроить следующие параметры:    Настраиваемые параметры при включенном режиме поддержки ЧПУ:  |  |  |  | | --- | --- | --- | | Каталог ЧПУ (относительно корня сайта) | **SEF\_FOLDER** | Каталог ЧПУ: путь до папки, с которой работает компонент. Этот путь может как совпадать с физическим путём, так и не совпадать. | | Адреса страниц | **SEF\_URL\_TEMPLATES** | Указываются адреса следующих страниц:  * **Главная страница**  - главная страница фотогалереи; * **Альбом**  - страница просмотра альбома; * **Альбом (редактирование)**  - страница редактирования параметров альбома; * **Альбом (редактирование обложки)**  - страница выбора обложки альбома; * **Загрузка фото**  - страница загрузки фотографий; * **Фото**  - страница просмотра фотографий; * **Фото (редактирование)**  - страница редактирования параметров фотографии; * **Фото (список)**  - страница со списком фотографий альбома; * **Поиск** - страница поиска. |  **SEF\_FOLDER** и **SEF\_URL\_TEMPLATES**.    Если режим поддержки ЧПУ **выключен**, то необходимо настроить следующие параметры:    Настраиваемые параметры при выключенном режиме поддержки ЧПУ:  |  |  |  | | --- | --- | --- | | Идентификатор раздела | **SECTION\_ID** | Указывается имя переменной, которой передается идентификатор раздела (альбома) фотогалереи. | | Идентификатор элемента | **ELEMENT\_ID** | Указывается имя переменной, которой передается идентификатор элемента (фотографии) фотогалереи. | | Идентификатор страницы | **PAGE\_NAME** | Указывается имя переменной, которой передается идентификатор страницы фотогалереи. | | Идентификатор действия | **ACTION** | Указывается имя переменной, которой передается идентификатор действия фотогалереи. |  **SECTION\_ID**, **ELEMENT\_ID**, **PAGE\_NAME** и **ACTION**. | | **Настройки кеширования** | | | | Тип кеширования | **CACHE\_TYPE** | Тип кеширования:  * **A** - Авто + Управляемое: автоматически обновляет кеш компонентов в течение заданного времени или при изменении данных; * **Y** - Кешировать: для кеширования необходимо определить время кеширования; * **N** - Не кешировать: кеширования нет в любом случае. | | Время кеширования (сек.) | **CACHE\_TIME** | Время кеширования, указанное в секундах. | | **Дополнительные настройки** | | | | Устанавливать заголовок страницы | **SET\_TITLE** | [Y|N] При отмеченной опции будут установлены заголовки всех страниц в соответствии с их содержимым. | | Показывать ссылки на главной странице | **SHOW\_LINK\_ON\_MAIN\_PAGE** | Указываются категории ссылок, которые будут отображены на главной старнице:  * **Новые (по дате добавления)** (**id**); * **Посещаемые (по количеству показов)** (**shows**); * **Лучшие (по количеству голосов)** (**rating**); * **Обсуждаемые (по количеству комментариев)** (**comments**). | | **Настройки фотогалереи** | | | | Размер картинки фотоальбома (px) | **ALBUM\_PHOTO\_SIZE** | Указывается размер картинки фотоальбома в пикселях (px). Размер задается для большей стороны картинки, другая сторона загружаемого изображения будет высчитана пропорционально. | | Размер фотографии-анонса (px) | **THUMBS\_SIZE** | Указывается размер картинки-анонса альбома в пикселях (px). Размер задается для большей стороны картинки, другая сторона загружаемого изображения будет высчитана пропорционально. | | Размер картинки в предпросмотре в списке альбомов (px) | **SECTION\_LIST\_THUMBS\_SIZE** | Указывается размер картинки в пикселях (px). Размер задается для большей стороны картинки, другая сторона загружаемого изображения будет высчитана пропорционально. | | Обязательно ограничивать размер оригинала (px) (при значении 0 ограничение не происходит) | **ORIGINAL\_SIZE** | Задается размер оригинала фотографии в пикселях. Фотография будет уменьшена до указанной величины. Если указано значение 0, то изменение размера не происходит. Размер задается для большей стороны картинки, другая сторона загружаемого изображения будет высчитана пропорционально. | | Отображать список альбомов в качестве рубрик со списком последних добавленых фотографий | **PHOTO\_LIST\_MODE** | [Y|N] При отмеченной опции в списке альбомов-рубрик будут отображаться последние добавленные фотографии. | | Количество выводимых фотографий в списке альбомов | **SHOWN\_ITEMS\_COUNT** | Задается количество отображаемых последних фотографий в альбомах в режиме, включенном параметром **PHOTO\_LIST\_MODE**. | | **Настройки голосования** | | | | Разрешить голосование | **USE\_RATING** | [Y|N] При отмеченной опции посетители смогут голосовать за фотографии, выставляя баллы, на странице с детальной информацией. При установленной опции становятся доступными следующие поля:    Доступные поля:  |  |  |  | | --- | --- | --- | | Максимальный балл | **MAX\_VOTE** | Указывается максимально возможный балл, т.е. число возможных оценок. | | Подписи к баллам | **VOTE\_NAMES** | Указываются подписи к каждому баллу. В коде вводится массив, в котором задаются подписи к баллам в таком виде:   ``` "VOTE_NAMES" => Array("0","1","2","3","4","5"),  ```  Если подписи заданы, то они будут выведены вместо оценок-цифр. Если массив не задан, то будут использованы значения по умолчанию. | | В качестве рейтинга показывать | **DISPLAY\_AS\_RATING** | Указывается одно из значений, которое должно быть показано в качестве рейтинга:  * **Рейтинг** (**rating**) - высчитывается на основе формулы: **Rating** = (SUM(vote)+3.125\*10) / (COUNT(\*)+10), где:  3.125 - это стартовый рейтинг. То есть изначально (при отсутствии голосов) рейтинг фотографии равен 3.125.  10 - это константа, определяющая количество голосов, "утяжеляющих" первоначальное значение рейтинга (3.125). Это исключает случай, когда, например, трое проголосовавших человека могут вознести или опустить фотографию всего тремя голосами.  При такой формуле расчета значение рейтинга получается более "плавное" и не так скачет при небольшом количестве голосующих. Чем больше голосов, тем больше рейтинг приближается к среднему арифметическому. * **Среднее значение** (**vote\_avg**) - высчитывается как среднее арифметическое всех баллов к фотографии; * **Рейтинг (главного модуля)** (**rating\_main**) - использование [рейтинга главного модуля](/user_help/service/rating/rating_settings.php). **Подробнее:** - см. главу [Рейтинги](http://dev.1c-bitrix.ru/learning/course/index.php?COURSE_ID=48&CHAPTER_ID=1232);     - в блоге [Рейтинги: создание собственного критерия рейтингования](http://dev.1c-bitrix.ru/community/blogs/hazz/2303.php);    - в блоге [Саморегулируемое сообщество, построенное на двухфакторном рейтинге](http://dev.1c-bitrix.ru/community/blogs/rsv-dev/2386.php). |  Вид кнопок рейтинга | **RATING\_MAIN\_TYPE** | Указывается одно из значений, которое должно быть показано в качестве рейтинга:  * **по умолчанию**; * **Плюс / минус** (**standart**); * **Мне нравится** (**like**).    Параметр доступен только если выбран **Рейтинг (главного модуля)** (**rating\_main**). | | |

**MAX\_VOTE** и **VOTE\_NAMES**.| **Настройки тегов** | | |
| Показывать теги | **SHOW\_TAGS** | [Y|N] При отмеченной опции будет показано облако тегов фотогалереи. Станут активными дополнительные поля     |  |  |  | | --- | --- | --- | | Количество тегов | **TAGS\_PAGE\_ELEMENTS** | Указывается количество тегов, отображаемых в облаке. |  Максимальный размер шрифта (px) | **TAGS\_FONT\_MAX** | Указывается максимальный размер шрифта отображения тегов (в пикселах). | |
| Минимальный размер шрифта (px) | **TAGS\_FONT\_MIN** | Указывается минимальный размер шрифта отображения тегов (в пикселах). |
| Цвет более позднего тега (пример: "C0C0C0") | **TAGS\_COLOR\_NEW** | Указывается код цвета тегов, дата создания которых наиболее поздняя (пример: "C0C0C0"). |
| Цвет более раннего тега (пример: "FEFEFE") | **TAGS\_COLOR\_OLD** | Указывается код цвета тегов, дата создания которых наиболее ранняя (пример: "FEFEFE"). |
| **Загрузка фото** | | |
| Тип загрузчика | **PHOTO\_UPLOADER\_TYPE** | Указывается тип загрузчика фотографий в фотогалерею:  * Одиночная загрузка через форму (**form**); * Множественный загрузчик (Java/ActiveX) (**applet**); * Множественный Flash-загрузчик (**flash**).  **Параметр устарел с версии 15.0.0** |
| Схема множественного загрузчика | **APPLET\_LAYOUT** | Параметр определяет тип загрузчика в фотогалерии по умолчанию:  * **Стандартный шаблон** (**extended**); * **Упрощенный шаблон загрузчика** (**simple**).  Выбор параметра доступен только при выборе параметра "Тип загрузчика" (**PHOTO\_UPLOADER\_TYPE**) равным "Множественный загрузчик (Java/ActiveX)" (**applet**).   **Параметр устарел с версии 15.0.0** |
| Максимальный размер загружаемого файла (не должен превышать 1024Mб) (Мб) | **UPLOAD\_MAX\_FILE\_SIZE** | Указывается максимальный размер загружаемого файла в Мб (не должен превышать 1024Mб). |
| Наносить авторский знак | **USE\_WATERMARK** | **Внимание!** Функционал авторского знака устарел и не поддерживается с версии **14.5.0** Главного модуля (**main**).  [Y|N] При отмеченной опции при загрузке фотографий можно будет наносить авторский знак. Станут доступны поля настройки авторского знака.    Поля настройки авторского знака:  |  |  |  | | --- | --- | --- | | Правила нанесения авторского знака | **WATERMARK\_RULES** | Указывается правило нанесения авторского знака:  * **На усмотрение пользователя** (**USER**); * **Обязательно наносить авторский знак** (**ALL**).  Если выбрано значение **Обязательно наносить авторский знак**, то дополнительно необходимо настроить дополнительные параметры (приведены в таблице ниже). | | Файл со шрифтом для авторского знака | **PATH\_TO\_FONT** | Указывается файл со шрифтом для создания авторского знака (будет использоваться также и при множественной загрузке). Шрифты предварительно загружаются в директорию **\bitrix\modules\photogallery\fonts\**. Поддерживаются **TTF**-, **OTF**- и **PS**-шрифты. | | Минимальный размер фото для авторского знака (px) | **WATERMARK\_MIN\_PICTURE\_SIZE** | Указывается минимальный размер фото, на которых будет нанесен авторский знак в пикселях (px). Размер задается для большей стороны картинки, другая сторона загружаемого изображения будет высчитана пропорционально. На фотографии меньшего размера знак добавлен не будет. |   **Дополнительные параметры,** заполняемые при выборе правила **Обязательно наносить авторский знак**   (обратите внимание, что список параметров меняется в зависимости от типа авторского знака) :  |  |  |  | | --- | --- | --- | | Тип авторского знака | **WATERMARK\_TYPE** | Указывается тип авторского знака:  * **Надпись (текст)** (**TEXT**); * **Картинка** (**PICTURE**).  Если выбрано значение **TEXT**, то дополнительно необходимо настроить параметры: **WATERMARK\_TEXT**, **WATERMARK\_COLOR** и **WATERMARK\_SIZE**. | | Текст надписи | **WATERMARK\_TEXT** | Задается текст авторского знака. | | Цвет надписи (без #, например, FF00EE) | **WATERMARK\_COLOR** | Указывается шестнадцатеричный код цвета надписи без использования #. | | Размер надписи (% от размера картинки) | **WATERMARK\_SIZE** | Задается размер надписи авторского знака в процентном соотношении от размера фото. | | Размещение авторского знака | **WATERMARK\_POSITION** | Указывается область размещения авторского знака на фото:  * **Сверху слева** (**tl**); * **Сверху по центру** (**tc**); * **Сверху справа** (**tr**); * **Cлева** (**ml**); * **По центру** (**mc**); * **Cправа** (**mr**); * **Снизу cлева** (**bl**); * **Снизу по центру** (**bc**); * **Снизу cправа** (**br**). | | Физический полный путь к картинке | **WATERMARK\_FILE** | Указывается полный путь к картинке для авторского знака относительно корня сайта. | | Расположение картинки на фото | **WATERMARK\_FILE\_ORDER** | Указывается тип расположения картинки авторского знака на фото:  * **Без изменений** (**usual**); * **Растянуть** (**resize**); * **Замостить** (**repeat**). |  Прозрачность авторского знака | **WATERMARK\_TRANSPARENCY** | Задается величина прозрачности авторского знака (в %). | |

### Параметры. Расширенный режим

|  |  |  |
| --- | --- | --- |
| **Поле** | **Параметр** | **Описание** |
| **Основные параметры** | | |
| Использовать простой режим настройки | **USE\_LIGHT\_VIEW** | [Y|N] При отсутствии отметки на данной опции будет использоваться расширенный режим настройки фотогалереи. |
| Тип инфоблока | **IBLOCK\_TYPE** | Указывается один из созданных в системе типов информационных блоков. |
| Инфоблок | **IBLOCK\_ID** | Для выбранного типа инфоблоков указывается идентификатор информационного блока, фотографии из которого будут выводиться. |
| По какому полю сортируем альбомы | **SECTION\_SORT\_BY** | Указывается поле, по которому будет происходить сортировка альбомов:  * **ID** - по идентификатору; * **NAME** - по названию; * **SORT** - по индексу сортировки; * **ELEMENTS\_CNT** - по количесву фото в альбоме; * **UF\_DATE** - по дате. |
| Порядок сортировки альбомов | **SECTION\_SORT\_ORD** | Задается порядок сортировки альбомов:  * **ASC** – **по возрастанию**; * **DESC** – **по убыванию**. |
| По какому полю сортируем фото | **ELEMENT\_SORT\_FIELD** | Указывается поле, по которому будет происходить сортировка фотографий:  * **SHOWS** – по количеству просмотров в среднем; * **SORT** – по индексу сортировки; * **TIMESTAMP\_X** – по дате последнего изменения; * **NAME** – по названию; * **ID** – по идентификатору; * **RATING** – по популярности; * **COMMENTS** – по комментариям. |
| Порядок сортировки фото в альбомах | **ELEMENT\_SORT\_ORDER** | Задается порядок сортировки фотографий в альбомах:  * **ASC** – **По возрастанию**; * **DESC** – **По убыванию**. |
| Путь к профилю пользователя | **PATH\_TO\_USER** | Указывается шаблон пути к профилю пользователя. |
| Сортировать фотографии в альбоме перетаскиванием | **DRAG\_SORT** | [Y|N] При отмеченной опции можно сортировать фотографии в альбоме перетаскиванием с помощью мыши. |
| **Настройки отзывов** | | |
| Разрешить отзывы | **USE\_COMMENTS** | [Y|N] При отмеченной опции будет доступен функционал отзывов. При расширенном режиме станут доступны дополнительные поля.    Дополнительные поля:  |  |  |  | | --- | --- | --- | | Компонент комментариев | **COMMENTS\_TYPE** | Указывается компонент, с помощью которого будут добавляться комментарии:  * **Блоги** (**blog**); * **Форум** (**forum**).  Если указать **Блоги**, то необходимо настроить следущие параметры: **BLOG\_URL**, **PATH\_TO\_BLOG**.   Если указать **Форум**, то необходимо настроить следущие параметры: **FORUM\_ID**, **URL\_TEMPLATES\_READ**, **URL\_TEMPLATES\_PROFILE\_VIEW**, **USE\_CAPTCHA**, **SHOW\_LINK\_TO\_FORUM**, **PREORDER**. | | ID форума для отзывов | **FORUM\_ID** | Указывается один из созданных в системе форумов, который будет использован для комментариев. | | Количество комментариев на странице | **COMMENTS\_COUNT** | Указывается количество комментариев на странице. | | Страница чтения темы | **URL\_TEMPLATES\_READ** | Указывается адрес страницы чтения темы форума. | | Страница пользователя | **URL\_TEMPLATES\_PROFILE\_VIEW** | Указывается адрес страницы профиля пользователя относительно корня сайта. | | Путь относительно корня сайта к папке со смайлами | **PATH\_TO\_SMILE** | Указывается путь к папке со смайликами относительно корня сайта. | | Использовать CAPTCHA | **USE\_CAPTCHA** | [Y|N] При отмеченной опции будет выводиться изображение и поле ввода **CAPTCHA** в форме добавления комментария в публичной части. | | Выводить сообщения в прямом порядке | **PREORDER** | [Y|N] При отмеченной опции собщения будут отсортированы по дате создания по возрастанию. | | Начинать тему текстом элемента | **POST\_FIRST\_MESSAGE** | [Y|N] При отмеченной опции в обсуждении на форуме будет выведено первое сообщение отзыва. | | Отображение имени | **NAME\_TEMPLATE** | Указывается шаблон для отображения ФИО комментирующего пользователя. По умолчанию - значение **Формат сайта** (т.е используются значение **Формат имени**, указанное в закладке **Параметры** страницы [Редактирование сайта](/user_help/settings/settings/sites/site_edit.php)). Указав пункт **другое->**, можно задать свой шаблон. Допустимы шаблоны: **#NAME#** - имя, **#LAST\_NAME#** - фамилия, **#SECOND\_NAME#** - отчество, **#NAME\_SHORT#**, **#LAST\_NAME\_SHORT#**, **#SECOND\_NAME\_SHORT#** - сокращенные до одной буквы имя, фамилия и отчество. | |
| **Управление адресами страниц** | | |
| Включить поддержку ЧПУ | **SEF\_MODE** | [Y|N] При отмеченной опции будет включена поддержка ЧПУ.    Если режим поддержки ЧПУ **включен**, то необходимо настроить следующие параметры:    Настраиваемые параметры при включенном режиме поддержки ЧПУ:  |  |  |  | | --- | --- | --- | | Каталог ЧПУ (относительно корня сайта) | **SEF\_FOLDER** | Каталог ЧПУ: путь до папки, с которой работает компонент. Этот путь может как совпадать с физическим путём, так и не совпадать. | | Адреса страниц | **SEF\_URL\_TEMPLATES** | Указываются адреса следующих страниц:  * **Главная страница**  - главная страница фотогалереи; * **Альбом**  - страница просмотра альбома; * **Альбом (редактирование)**  - страница редактирования параметров альбома; * **Альбом (редактирование обложки)**  - страница выбора обложки альбома; * **Загрузка фото**  - страница загрузки фотографий; * **Фото**  - страница просмотра фотографий; * **Фото (редактирование)**  - страница редактирования параметров фотографии; * **Фото (список)**  - страница со списком фотографий альбома; * **Поиск** - страница поиска. |  **SEF\_FOLDER** и **SEF\_URL\_TEMPLATES**.    Если режим поддержки ЧПУ **выключен**, то необходимо настроить следующие параметры:    Настраиваемые параметры при выключенном режиме поддержки ЧПУ:  |  |  |  | | --- | --- | --- | | Идентификатор раздела | **SECTION\_ID** | Указывается имя переменной, которой передается идентификатор раздела (альбома) фотогалереи. | | Идентификатор элемента | **ELEMENT\_ID** | Указывается имя переменной, которой передается идентификатор элемента (фотографии) фотогалереи. | | Идентификатор страницы | **PAGE\_NAME** | Указывается имя переменной, которой передается идентификатор страницы фотогалереи. | | Идентификатор действия | **ACTION** | Указывается имя переменной, которой передается идентификатор действия фотогалереи. |  **SECTION\_ID**, **ELEMENT\_ID**, **PAGE\_NAME** и **ACTION**. |
| **Настройки кеширования** | | |
| Тип кеширования | **CACHE\_TYPE** | Тип кеширования:  * **A** - Авто + Управляемое: автоматически обновляет кеш компонентов в течение заданного времени или при изменении данных; * **Y** - Кешировать: для кеширования необходимо определить время кеширования; * **N** - Не кешировать: кеширования нет в любом случае. |
| Время кеширования (сек.) | **CACHE\_TIME** | Время кеширования, указанное в секундах. |
| **Дополнительные настройки** | | |
| Устанавливать заголовок страницы | **SET\_TITLE** | [Y|N] При отмеченной опции будут установлены заголовки всех страниц в соответствии с их содержимым. |
| Показывать ссылки на главной странице | **SHOW\_LINK\_ON\_MAIN\_PAGE** | Указываются категории ссылок, которые будут отображены на главной старнице:  * **Новые (по дате добавления)** (**id**); * **Посещаемые (по количеству показов)** (**shows**); * **Лучшие (по количеству голосов)** (**rating**); * **Обсуждаемые (по количеству комментариев)** (**comments**). |
| Формат вывода даты альбома | **DATE\_TIME\_FORMAT\_SECTION** | Указывается формат показа даты и времени альбома. В выпадающем списке перечислены все возможные варианты показа даты, формируемые внутри компонента. Выбрав пункт **(другое)->**, можно сформировать свой вариант на основании php-функции **date**. |
| Формат вывода даты фото | **DATE\_TIME\_FORMAT\_DETAIL** | Указывается формат показа даты и времени фотографии. В выпадающем списке перечислены все возможные варианты показа даты, формируемые внутри компонента. Выбрав пункт **(другое)->**, можно сформировать свой вариант на основании php-функции **date**. |
| **Настройки постраничной навигации** | | |
| Количество альбомов на странице | **SECTION\_PAGE\_ELEMENTS** | Указывается количество альбомов, отображаемых на одной странице. Остальные альбомы будут выведены с помощью постраничной навигации. |
| Количество фото на странице | **ELEMENTS\_PAGE\_ELEMENTS** | Указывается количество фотографий, отображаемых на одной странице. Остальные фотографии будут выведены с помощью постраничной навигации. |
| Шаблон для постраничной навигации | **PAGE\_NAVIGATION\_TEMPLATE** | Указываются название шаблона для постраничной навигации. |
| **Настройки фотогалереи** | | |
| Размер картинки фотоальбома (px) | **ALBUM\_PHOTO\_SIZE** | Указывается размер картинки фотоальбома в пикселях (px). Размер задается для большей стороны картинки, другая сторона загружаемого изображения будет высчитана пропорционально. |
| Размер фотографии-анонса (px) | **THUMBS\_SIZE** | Указывается размер картинки-анонса альбома в пикселях (px). Размер задается для большей стороны картинки, другая сторона загружаемого изображения будет высчитана пропорционально. |
| Размер картинки в предпросмотре в списке альбомов (px) | **SECTION\_LIST\_THUMBS\_SIZE** | Указывается размер картинки в пикселях (px). Размер задается для большей стороны картинки, другая сторона загружаемого изображения будет высчитана пропорционально. |
| Качество фотографии-анонса (%) | **JPEG\_QUALITY1** | Указывается качество фотографии-анонса в процентах (100% - самое высокое качество). |
| Обязательно ограничивать размер оригинала (px) (при значении 0 ограничение не происходит) | **ORIGINAL\_SIZE** | Задается размер оригинала фотографии в пикселях. Фотография будет уменьшена до указанной величины. Если указано значение 0, то изменение размера не происходит. Размер задается для большей стороны картинки, другая сторона загружаемого изображения будет высчитана пропорционально. |
| Качество загружаемой фотографии (%) | **JPEG\_QUALITY** | Указывается качество загружаемой фотографии в процентах (100% - самое высокое качество). |
| Дополнительные эскизы | **ADDITIONAL\_SIGHTS** | Указываются типы для эскизов фотографий, которые должны быть показаны. |
| Отображать список альбомов в качестве рубрик со списком последних добавленых фотографий | **PHOTO\_LIST\_MODE** | [Y|N] При отмеченной опции в списке альбомов-рубрик будут отображаться последние добавленные фотографии. |
| Количество выводимых фотографий в списке альбомов | **SHOWN\_ITEMS\_COUNT** | Задается количество отображаемых последних фотографий в альбомах в режиме, включенном параметром **PHOTO\_LIST\_MODE**. |
| Отображать навигационную цепочку 'хлебные крошки' в рамках комплексного компонента | **SHOW\_NAVIGATION** | [Y|N] При отмеченной опции на странице фотогалереи будет отображаться навигационная цепочка ('хлебные крошки'). |
| **Настройки голосования** | | |
| Разрешить голосование | **USE\_RATING** | [Y|N] При отмеченной опции посетители смогут голосовать за фотографии, выставляя баллы, на странице с детальной информацией. При установленной опции становятся доступными следующие поля:    Доступные поля:  |  |  |  | | --- | --- | --- | | Максимальный балл | **MAX\_VOTE** | Указывается максимально возможный балл, т.е. число возможных оценок. | | Подписи к баллам | **VOTE\_NAMES** | Указываются подписи к каждому баллу. В коде вводится массив, в котором задаются подписи к баллам в таком виде:   ``` "VOTE_NAMES" => Array("0","1","2","3","4","5"),  ```  Если подписи заданы, то они будут выведены вместо оценок-цифр. Если массив не задан, то будут использованы значения по умолчанию. | | В качестве рейтинга показывать | **DISPLAY\_AS\_RATING** | Указывается одно из значений, которое должно быть показано в качестве рейтинга:  * **Рейтинг** (**rating**) - высчитывается на основе формулы: **Rating** = (SUM(vote)+3.125\*10) / (COUNT(\*)+10), где:  3.125 - это стартовый рейтинг. То есть изначально (при отсутствии голосов) рейтинг фотографии равен 3.125.  10 - это константа, определяющая количество голосов, "утяжеляющих" первоначальное значение рейтинга (3.125). Это исключает случай, когда, например, трое проголосовавших человека могут вознести или опустить фотографию всего тремя голосами.  При такой формуле расчета значение рейтинга получается более "плавное" и не так скачет при небольшом количестве голосующих. Чем больше голосов, тем больше рейтинг приближается к среднему арифметическому. * **Среднее значение** (**vote\_avg**) - высчитывается как среднее арифметическое всех баллов к фотографии; * **Рейтинг (главного модуля)** (**rating\_main**) - использование [рейтинга главного модуля](/user_help/service/rating/rating_settings.php). **Подробнее:** - см. главу [Рейтинги](http://dev.1c-bitrix.ru/learning/course/index.php?COURSE_ID=48&CHAPTER_ID=1232);     - в блоге [Рейтинги: создание собственного критерия рейтингования](http://dev.1c-bitrix.ru/community/blogs/hazz/2303.php);    - в блоге [Саморегулируемое сообщество, построенное на двухфакторном рейтинге](http://dev.1c-bitrix.ru/community/blogs/rsv-dev/2386.php). |  Вид кнопок рейтинга | **RATING\_MAIN\_TYPE** | Указывается одно из значений, которое должно быть показано в качестве рейтинга:  * **по умолчанию**; * **Плюс / минус** (**standart**); * **Мне нравится** (**like**).    Параметр доступен только если выбран **Рейтинг (главного модуля)** (**rating\_main**). | |

**MAX\_VOTE** и **VOTE\_NAMES**.| **Настройки тегов** | | |
| Показывать теги | **SHOW\_TAGS** | [Y|N] При отмеченной опции будет показано облако тегов фотогалереи и станут доступны дополнительные поля.    Дополнительные поля:  |  |  |  | | --- | --- | --- | | Количество тегов | **TAGS\_PAGE\_ELEMENTS** | Указывается количество тегов, отображаемых в облаке. | | Период выборки тегов (дней) | **TAGS\_PERIOD** | Указывается количество дней, за которые происходит выборка тегов. | | Сужать область поиска | **TAGS\_INHERIT** | [Y|N] При отмеченной опции выбранные теги добавляются в фильтр поиска. |  Максимальный размер шрифта (px) | **TAGS\_FONT\_MAX** | Указывается максимальный размер шрифта отображения тегов (в пикселах). | |
| Минимальный размер шрифта (px) | **TAGS\_FONT\_MIN** | Указывается минимальный размер шрифта отображения тегов (в пикселах). |
| Цвет более позднего тега (пример: "C0C0C0") | **TAGS\_COLOR\_NEW** | Указывается код цвета тегов, дата создания которых наиболее поздняя (пример: "C0C0C0"). |
| Цвет более раннего тега (пример: "FEFEFE") | **TAGS\_COLOR\_OLD** | Указывается код цвета тегов, дата создания которых наиболее ранняя (пример: "FEFEFE"). |
| Показывать цепочку навигации | **TAGS\_SHOW\_CHAIN** | [Y|N] При отмеченной опции будет показана цепочка навигации. Параметр работает, если параметр **TAGS\_INHERIT** принимает значение **Y**. |
| **Загрузка фото** | | |
| Тип загрузчика | **PHOTO\_UPLOADER\_TYPE** | Указывается тип загрузчика фотографий в фотогалерею:  * Одиночная загрузка через форму (**form**); * Множественный загрузчик (Java/ActiveX) (**applet**); * Множественный Flash-загрузчик (**flash**).  **Параметр устарел с версии 15.0.0** |
| Схема множественного загрузчика | **APPLET\_LAYOUT** | Параметр определяет тип загрузчика в фотогалерии по умолчанию:  * **Стандартный шаблон** (**extended**); * **Упрощенный шаблон загрузчика** (**simple**).  Выбор параметра доступен только при выборе параметра "Тип загрузчика" (**PHOTO\_UPLOADER\_TYPE**) равным "Множественный загрузчик (Java/ActiveX)" (**applet**).   **Параметр устарел с версии 15.0.0** |
| Максимальный размер загружаемого файла (не должен превышать 1024Mб) (Мб) | **UPLOAD\_MAX\_FILE\_SIZE** | Указывается максимальный размер загружаемого файла в Мб (не должен превышать 1024Mб). |
| Наносить авторский знак | **USE\_WATERMARK** | **Внимание!** Функционал авторского знака устарел и не поддерживается с версии **14.5.0** Главного модуля (**main**).  [Y|N] При отмеченной опции при загрузке фотографий можно будет наносить авторский знак. Станут доступны поля настройки авторского знака.    Поля настройки авторского знака:  |  |  |  | | --- | --- | --- | | Правила нанесения авторского знака | **WATERMARK\_RULES** | Указывается правило нанесения авторского знака:  * **На усмотрение пользователя** (**USER**); * **Обязательно наносить авторский знак** (**ALL**).  Если выбрано значение **Обязательно наносить авторский знак**, то дополнительно необходимо настроить дополнительные параметры (приведены в таблице ниже). | | Файл со шрифтом для авторского знака | **PATH\_TO\_FONT** | Указывается файл со шрифтом для создания авторского знака (будет использоваться также и при множественной загрузке). Шрифты предварительно загружаются в директорию **\bitrix\modules\photogallery\fonts\**. Поддерживаются **TTF**-, **OTF**- и **PS**-шрифты. | | Минимальный размер фото для авторского знака (px) | **WATERMARK\_MIN\_PICTURE\_SIZE** | Указывается минимальный размер фото, на которых будет нанесен авторский знак в пикселях (px). Размер задается для большей стороны картинки, другая сторона загружаемого изображения будет высчитана пропорционально. На фотографии меньшего размера знак добавлен не будет. |   **Дополнительные параметры,** заполняемые при выборе правила **Обязательно наносить авторский знак**   (обратите внимание, что список параметров меняется в зависимости от типа авторского знака) :  |  |  |  | | --- | --- | --- | | Тип авторского знака | **WATERMARK\_TYPE** | Указывается тип авторского знака:  * **Надпись (текст)** (**TEXT**); * **Картинка** (**PICTURE**).  Если выбрано значение **TEXT**, то дополнительно необходимо настроить параметры: **WATERMARK\_TEXT**, **WATERMARK\_COLOR** и **WATERMARK\_SIZE**. | | Текст надписи | **WATERMARK\_TEXT** | Задается текст авторского знака. | | Цвет надписи (без #, например, FF00EE) | **WATERMARK\_COLOR** | Указывается шестнадцатеричный код цвета надписи без использования #. | | Размер надписи (% от размера картинки) | **WATERMARK\_SIZE** | Задается размер надписи авторского знака в процентном соотношении от размера фото. | | Размещение авторского знака | **WATERMARK\_POSITION** | Указывается область размещения авторского знака на фото:  * **Сверху слева** (**tl**); * **Сверху по центру** (**tc**); * **Сверху справа** (**tr**); * **Cлева** (**ml**); * **По центру** (**mc**); * **Cправа** (**mr**); * **Снизу cлева** (**bl**); * **Снизу по центру** (**bc**); * **Снизу cправа** (**br**). | | Физический полный путь к картинке | **WATERMARK\_FILE** | Указывается полный путь к картинке для авторского знака относительно корня сайта. | | Расположение картинки на фото | **WATERMARK\_FILE\_ORDER** | Указывается тип расположения картинки авторского знака на фото:  * **Без изменений** (**usual**); * **Растянуть** (**resize**); * **Замостить** (**repeat**). |  Прозрачность авторского знака | **WATERMARK\_TRANSPARENCY** | Задается величина прозрачности авторского знака (в %). | |

### Пример вызова

```
<?$APPLICATION->IncludeComponent("bitrix:photogallery","",Array(
		"SHOW_LINK_ON_MAIN_PAGE" => array("id","rating","comments","shows"),
		"USE_LIGHT_VIEW" => "Y",
		"SEF_MODE" => "Y",
		"IBLOCK_TYPE" => "gallery",
		"IBLOCK_ID" => "10",
		"SECTION_SORT_BY" => "UF_DATE",
		"SECTION_SORT_ORD" => "DESC",
		"ELEMENT_SORT_FIELD" => "sort",
		"ELEMENT_SORT_ORDER" => "desc",
		"PATH_TO_USER" => "",
		"SECTION_PAGE_ELEMENTS" => "15",
		"ELEMENTS_PAGE_ELEMENTS" => "50",
		"PAGE_NAVIGATION_TEMPLATE" => "",
		"ALBUM_PHOTO_SIZE" => "120",
		"THUMBNAIL_SIZE" => "100",
		"JPEG_QUALITY1" => "100",
		"ORIGINAL_SIZE" => "1280",
		"JPEG_QUALITY" => "100",
		"ADDITIONAL_SIGHTS" => array(),
		"PHOTO_LIST_MODE" => "Y",
		"SHOWN_ITEMS_COUNT" => "6",
		"SHOW_NAVIGATION" => "N",
		"DATE_TIME_FORMAT_DETAIL" => "d.m.Y",
		"DATE_TIME_FORMAT_SECTION" => "d.m.Y",
		"SET_TITLE" => "Y",
		"CACHE_TYPE" => "A",
		"CACHE_TIME" => "3600",
		"CACHE_NOTES" => "",
		"USE_RATING" => "Y",
		"SHOW_TAGS" => "Y",
		"DRAG_SORT" => "Y",
		"UPLOADER_TYPE" => "applet",
		"APPLET_LAYOUT" => "extended",
		"UPLOAD_MAX_FILE_SIZE" => "1024",
		"USE_WATERMARK" => "Y",
		"WATERMARK_RULES" => "ALL",
		"WATERMARK_TYPE" => "PICTURE",
		"WATERMARK_FILE" => "",
		"WATERMARK_FILE_ORDER" => "usual",
		"WATERMARK_POSITION" => "mc",
		"WATERMARK_TRANSPARENCY" => "20",
		"PATH_TO_FONT" => "",
		"WATERMARK_MIN_PICTURE_SIZE" => "800",
		"MAX_VOTE" => "5",
		"VOTE_NAMES" => array("1","2","3","4","5"),
		"DISPLAY_AS_RATING" => "rating",
		"USE_COMMENTS" => "Y",
		"COMMENTS_TYPE" => "blog",
		"BLOG_URL" => "admin-blg",
		"COMMENTS_COUNT" => "10",
		"PATH_TO_BLOG" => "",
		"PATH_TO_SMILE" => "/bitrix/images/forum/smile/",
		"NAME_TEMPLATE" => "#NOBR##LAST_NAME# #NAME##/NOBR#",
		"TAGS_PAGE_ELEMENTS" => "150",
		"TAGS_PERIOD" => "",
		"TAGS_INHERIT" => "Y",
		"TAGS_FONT_MAX" => "30",
		"TAGS_FONT_MIN" => "10",
		"TAGS_COLOR_NEW" => "3E74E6",
		"TAGS_COLOR_OLD" => "C0C0C0",
		"TAGS_SHOW_CHAIN" => "Y",
		"SEF_FOLDER" => "/",
		"SEF_URL_TEMPLATES" => Array(
			"index" => "index.php",
			"section" => "#SECTION_ID#/",
			"section_edit" => "#SECTION_ID#/action/#ACTION#/",
			"section_edit_icon" => "#SECTION_ID#/icon/action/#ACTION#/",
			"upload" => "#SECTION_ID#/action/upload/",
			"detail" => "#SECTION_ID#/#ELEMENT_ID#/",
			"detail_edit" => "#SECTION_ID#/#ELEMENT_ID#/action/#ACTION#/",
			"detail_list" => "list/",
			"search" => "search/"
		),
		"VARIABLE_ALIASES" => Array(
			"index" => Array(),
			"section" => Array(),
			"section_edit" => Array(),
			"section_edit_icon" => Array(),
			"upload" => Array(),
			"detail" => Array(),
			"detail_edit" => Array(),
			"detail_list" => Array(),
			"search" => Array(),
		)
	),
);?>

```

Новинки документации в соцсетях:

#### Пользовательские комментарииПомните, что Пользовательские комментарии, несмотря на модерацию, не являются официальной документацией. Ответственность за их использование несет сам пользователь. Также Пользовательские комментарии не являются местом для обсуждения функционала. По подобным вопросам обращайтесь на [форумы](http://dev.1c-bitrix.ru/community/forums/group1/).

| 0  **Роберт Басыров** 03.09.2009 12:18:24 |
| --- |
| **Вопрос**: Как сделать так, чтобы при нажатии на картинку открывалась не новая страница ".../detail.php", а сама картинка по адресу ".../upload".   **Решение**: Используйте библиотеку Jquery - выбрать и скачать можно отсюда: [Примеры фотогалерей](http://cyrill.co.uk/2008/01/15/pure-css-dhtml-javascript-galleries/) |
|  |

| 0  **Роберт Басыров** 22.04.2009 17:57:49 |
| --- |
| **Вопрос**: Совместимость инфоблоков фотогалереи и фотогалереи 2.0. Можно ли использовать новую фотогалерею с инфоблоком от старой и какие могут быть последствия?   Проблем быть не должно. Но есть некоторые моменты:  1. Шаблон сайта должен содержать строки $APPLICATION->ShowHeadString(); $APPLICATION->ShowHeadScript();  2. В слайд-шоу будут превьюшки фоток.  Чтобы в слайдшоу отображались не превью, а настоящие фото в файле компонента photogallery.detail.list надо поменять:  | Код | | --- | | ``` $arElement["~PICTURE"] = $arElement["PREVIEW_PICTURE"]; ``` | на  | Код | | --- | | ``` $arElement["~PICTURE"] = $arElement["DETAIL_PICTURE"]; ``` | |
|  |

© «Битрикс», 2001-2025, «1С-Битрикс», 2025

Наверх