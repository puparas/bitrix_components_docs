# Веб-аналитика. Настройки модуля

Документация для разработчиков

[Документация для разработчиков](https://dev.1c-bitrix.ru/api_help/)
[Документация по D7](https://dev.1c-bitrix.ru/api_d7/)
[Документация по REST](https://dev.1c-bitrix.ru/rest_help/)
[Пользовательская документация](https://dev.1c-bitrix.ru/user_help/)

Темная тема

[Основные сведения](/user_help/index.php)
[Реализация и системные требования](/user_help/reqintro.php)

[Справочная система и документация](/user_help/help/index.php)

[Контент](/user_help/content/index.php)

[Сайты 24](/user_help/sites24/index.php)

[Маркетинг](/user_help/marketing/index.php)

[Магазин](/user_help/store/index.php)

[Клиенты](/user_help/clients/index.php)

[Сервисы](/user_help/service/index.php)

[Веб-аналитика](/user_help/statistic/index.php)

[Веб-аналитика. Настройки модуля](/user_help/statistic/settings_va.php)
[Сводная статистика](/user_help/statistic/stat_list.php)
[Кто на сайте](/user_help/statistic/users_online.php)

[Посещаемость](/user_help/statistic/site_traffic/index.php)

[Рекламные кампании](/user_help/statistic/advertising_campaigns/index.php)

[События](/user_help/statistic/events/index.php)

[Поисковики](/user_help/statistic/search_engines/index.php)

[Ссылающиеся сайты](/user_help/statistic/referer_sites/index.php)

[Посетители](/user_help/statistic/visitors/index.php)

[Marketplace](/user_help/marketplace/index.php)

[Настройки](/user_help/settings/index.php)

[Компоненты](/user_help/components/index.php)

[Описание компонентов решений](/user_help/description_decisions/index.php)

[Дополнительно](/user_help/additional/index.php)

[Веб-аналитика](/user_help/statistic/index.php)

Веб-аналитика. Настройки модуля

**Недоступно в редакциях:**Малый бизнес, Стандарт, Старт

# Веб-аналитика. Настройки модуля

Закладки

Форма настроек модуля **Веб-аналитика** (*Настройки > Настройки продукта > Настройки модулей > Веб-аналитика*) предназначена для задания общесистемных параметров модуля. Для удобства работы форма разделена на закладки, на каждой из которых выполняется настройка определённой группы параметров модуля.

  

### Настройки

| Поле | Описание |
| --- | --- |
| Когда отослать очередной статистический отчет по EMail (DD.MM.YYYY HH:MI:SS) | Данное поле содержит время отсылки очередного статистического отчета по электронной почте. В дальнейшем, отчет будет отсылаться ежедневно в это время. В случае, если поле оставлено пустым, отчет не будет отсылаться.     Если сайт работает под управлением ОС **Windows**, данное поле по умолчанию не заполнено и отчет не отсылается. Это связано с довольно длительной отправкой письма в данной операционной системе. В противном случае, в данном поле содержится текущая дата, время - 9:00. |
| Интервал посетителей в online (сек.) | На странице **Кто на сайте** (*Аналитика > Кто на сайте*) Вы можете видеть сессии посетителей, проявивших активность за последние **N** секунд, которые задаются в этом поле. |
| Максимальное кол-во показываемых записей в таблицах | Страницы модуля **Веб-аналитика** отображают различные таблицы данных, которые представляют собой *выборки* из базы данных. Каждая выборка характеризуется, помимо прочего, количеством выбранных записей. Большее количество выбираемых записей требует большего количества ресурсов, необходимых серверу для обработки запроса и тем больше времени надо для отработки статистических страниц. Для ограничения количества выбираемых записей и ускорения генерации статистических отчетов (таблиц) введен этот параметр, позволяющий ограничить объемы выборок количеством выбираемых записей. При необходимости, можно снять данное ограничение, указав большую величину, например, 100 000 000 записей. Как правило, даже при очень большой загруженности сайта такие величины достигаются крайне редко. |
| Ширина графиков | Ширина графиков, отображаемых отчетами модуля (в пикселях). |
| Высота графиков | Высота графиков, отображаемых отчетами модуля (в пикселях). |
| Диаметр круговых диаграмм | Диаметр диаграмм, отображаемых отчетами модуля (в пикселях). |
| Размер TOP списка в сводной статистике | Количество элементов ([рекламных кампаний](/user_help/statistic/advertising_campaigns/adv_list.php), [событий](/user_help/statistic/events/event_list.php) и т.д.), включаемых в отчеты на странице сводной статистики. |
| Размер TOP списка в детальном просмотре рекламной кампании | Количество элементов (точек входа и выхода, событий и т.д.), включаемых в отчеты на странице сводной статистики. |
| Использовать дополнительную обработку посетителей, не принимающих файлов cookie | В модуле сбора статистики предусмотрена схема работы с браузерами или любыми другими программами, не поддерживающими хранимых или сессионных cookies. Это достигается путём хранения сессионных данных в специальной таблице. При этом, идентификация посетителя производится по хэш-функции (md5) от ряда переменных окружения, характеризующих именно данного посетителя. Данный флаг позволяет включить или отключить такую дополнительную обработку. |
| Оптимизировать таблицы при очистке? | Автоматически оптимизирует таблицы MySQL при удалении устаревшей статистической информации (по полям **Сколько дней хранить...**). |
| Базовая валюта | Указывается валюта, в которой будут храниться все финансовые показатели. |
| Пересчитать все финансовые показатели | Если опция отмечена, то при сохранении настроек модуля все финансовые показатели будут пересчитаны в новой базовой валюте. |
| Ограничение активности Данная секция позволяет установить защиту от массовых скачиваний сайта специальными программами-грабберами. Если Вы не хотите, чтобы Ваш сайт был доступен для офлайнового просмотра, или Вы хотите просто ограничить доступ клиентов к сайту определённым количеством соединений, заполните поля этой формы соответствующими значениями. | |
| [ редактировать шаблон ] | Кликнув ссылку **редактировать шаблон**, можно изменить PHP и HTML-код страницы, отправляемой клиенту при превышении лимита хитов. |
| Блокировать? | Если опция включена, излишне активные клиенты блокируются. |
| на время (сек.) | Период времени, в течение которого излишне активный клиент будет получать ошибку 503 (либо другую, устанавливаемую в шаблоне) на все запросы. |
| если в течение (сек.) | Период времени, в течение которого клиент не должен сделать большее количество хитов, чем указано в следующем поле. |
| сделано более N хитов | Максимальное количество хитов, которое клиент может сделать, не будучи заблокированным. |
| Сделать запись в журнал событий | Если опция отмечена, то при превышении лимита активности будет сделана запись в журнале событий. Ссылка [журнал событий](/user_help/settings/utilities/event_log/event_log.php) позволяет перейти к странице просмотра журнала событий. |

### Рекламные кампании

| Поле | Описание |
| --- | --- |
| Использовать рекламную кампанию c referer1=NA, referer2=NA по умолчанию? | При установке данного флага все посетители, заходящие на сайт не по рекламной кампании и не совершающие возвратов по рекламным кампаниям, будут приписываться к рекламной кампании со следующими идентификаторами: **referer1=NA**, **referer2=NA**. |
| Автоматически создавать рекламные кампании при наличии параметров referer1, referer2 в URL'е | Если флаг установлен, и если параметры **referer1**, **referer2** присутствуют в URL, но не найдено ни одной рекламной кампании с такими идентификаторами, создаётся новая кампания с этими параметрами. |
| Для автоматически создаваемых рекламных кампаний проверять, что referer1 и referer2 содержат только символы латинского алфавита, цифры и символы "\_:;.,-" | Если опция отмечена, то при автоматическом создании рекламной кампании будет выполнятся проверка, чтобы **referer1** и **referer2** содержали только символы латинского алфавита, цифры и знак подчеркивания. |
| Учитывать события рекламных кампаний для поисковиков | При отмеченной опции события рекламных кампаний будут учитываться для [поисковиков](/user_help/statistic/search_engines/phrase_list.php). |
| Синонимы referer1 | Данное поле позволяет назначить синонимы идентификаторам рекламных кампаний. По умолчанию синонимами **referer1** являются **r1** и **referrer1**. |
| Синонимы referer2 | То же для **referer2**. |
| Синонимы referer3 | То же для **referer3**. |
| Как показывать события в отчете рекламных кампаний по умолчанию | В отчете по рекламным кампаниям крайний столбец представляет информацию по событиям, сгенерированным посетителями, заходившими по данной рекламной кампании. Данный параметр позволяет видоизменять этот отчет. |
| Поддержка Openstat Данная секция позволяет настроить поддержку технологии **Openstat**, которая служит для точной идентификации переходов на сайт рекламодателя по каждому рекламному сообщению (текстовому объявлению, баннеру). | |
| Обрабатывать Openstat | Отмеченная опция позволяет включить обработку ссылок Openstat. По ссылке **Openstat** Вы можете перейти на сайт <http://openstat.ru>, посвященный данной технологии. |
| Шаблон формирования значения referer1 | Шаблон, по которому формируются значения `referer1` из ссылки, совметимой с Openstat. В шаблоне можно использовать **#service-name#**, **#campaign-id#**, **#ad-id#**, **#source-id#**. |
| Шаблон формирования значения referer2 | Шаблон, по которому формируются значения `referer2` из ссылки, совметимой с Openstat. В шаблоне можно использовать **#service-name#**, **#campaign-id#**, **#ad-id#**, **#source-id#**. |

### Страна и город

На закладке выполняется настройка параметров определения страны и города посетителя по IP адресу.

В таблице перечислены возможные источники определения города и страны, поддерживаемые модулем **Веб-аналитика**. С помощью колонки **Будет использован** выберите доступный и необходимый вам источник определения города и страны по IP-адресу.

### Настройка данных

| Поле | Описание |
| --- | --- |
| Посещаемость страниц и разделов | |
| Сохранять статистику посещений разделов и файлов? | Флаг позволяет отключить либо включить сбор статистики посещений разделов и страниц сайта. Данная информация отображается в меню [Посещаемость](/user_help/statistic/site_traffic/index.php). |
| Собирать данные для отчета "Пути по сайту"? | Если опция включена, модуль **Веб-аналитика** регистрирует события и другую информацию, нужную для отображения отчета путей по сайту. |
| Максимальная длина путей по сайту для хранения | Максимальное количество переходов со страницы на страницу, которые будут сохраняться в пределах одного пути. |
| Важные параметры страницы | Параметры страницы (передаваемые в URL как **?param=value&param=value...**), сохраняемые в статистике. |
| Индексные страницы разделов | Имена индексных страниц разделов, сохраняемых в статистике. |
| Поисковые системы | |
| Маски для UserAgent'ов браузеров (используется для автодетекта поисковиков в качестве исключений) | В данном поле можно задать маски UserAgent’ов браузеров. Все браузеры, соответствующие данным маскам, будут исключены из рассмотрения в автодетекте (пункт меню *Аналитика > Поисковики > Автодетект*). В масках можно использовать спецсимволы **%** (ноль или более любых символов) и **\_** (один любой символ). Если вы задаете неточное совпадение маски, то необходимо обрамить ее с двух сторон спецсимволом **%**. |
| События | |
| Кодировать дополнительный параметр #EVENT\_GID# для событий | Данный флаг позволяет установить кодирование base64 для информативной части дополнительного параметра для событий. |
| Краткий идентификатор группы сайтов (для дополнительного параметра в ручной загрузке событий) (без точек и пробелов) | Краткий идентификатор группы сайтов используется в дополнительном параметре при ручной [загрузке событий](/user_help/statistic/events/event_edit.php), происходящей за пределами сайта. Данный идентификатор был введен с целью дать возможность отличать дополнительные параметры внешних событий одного сайта от другого, при условии работы обоих сайтов на базе системы **"1С-Битрикс: Управление сайтом"**. |
| Путь к дополнительным обработчикам при ручной загрузке событий | Путь к папке со скриптами (относительно корня сайта), которые могут быть использованы при загрузке событий для предварительной обработки CSV-файлов. Список имен файлов из этой папки включается в список поля **Обработчик CSV файла** формы [загрузки событий](/user_help/statistic/events/event_edit.php). |
| Ссылающиеся сайты и поисковые фразы | |
| Сохранять статистику ссылающихся сайтов и поисковых фраз? | Флаг позволяет отключить сбор статистики по заходам с внешних ссылающихся сайтов (в том числе и с поисковых систем). Данная информация отображается в меню **Ссылающиеся сайты**, **Поисковые фразы**. |
| Не очищать из ссылающихся доменов первые (TOP) | При очистке ссылающихся доменов можно указать первые по активности **N** доменов, которые не будут очищаться. Если вы укажете 0, все ссылающиеся домены будут очищаться по общему принципу: по дате последнего захода с этих доменов и в зависимости от количества дней, указанного в параметре **Сколько дней хранить ссылающиеся домены** на закладке **Время хранения**. |
| Хиты | |
| Сохранять хиты? | Флаг позволяет отключить либо включить сохранение в базе адресов загружаемых страниц сайта. Данная информация отображается в меню **Хиты посетителей** (*Аналитика > Посетители > Хиты*) |

### Время хранения

Параметры закладки позволяют задать максимальное время хранения каждого события в днях. Каждый параметр имеет флаг "**очистить**", который позволяет удалить статистику по данному параметру. Очистка информации происходит по нажатии на кнопку **Сохранить**.

| Поле | Описание |
| --- | --- |
| Посещаемость страниц и разделов | |
| Сколько дней хранить историю посещений разделов и файлов | Посещаемость страниц и разделов сайта (количество хитов на страницу или раздел сайта) хранится в отдельной таблице, которая очищается по дате последнего хита по тому или иному разделу/странице в зависимости от количества дней, указанных в данном поле. |
| Сколько дней хранить динамику путей по сайту | По каждому пути на каждый день хранятся переходы в пределах конкретного пути. Эти данные хранятся в таблице, которая очищается по дате последнего перехода в зависимости от количества дней, указанных в данном поле. |
| Ссылающиеся сайты и поисковые фразы | |
| Сколько дней хранить заходы с поисковыми фразами | Заход по поисковой фразе записывается в отдельную таблицу и характеризуется рядом параметров, в том числе датой захода, по которой данная таблице очищается в зависимости от количества дней, указанных в данном поле. |
| Сколько дней хранить заходы с ссылающихся страниц | Таблица заходов по ссылающимся сайтам очищается по полю **дата захода** в зависимости от количества дней, указанных в данном поле. |
| Сколько дней хранить ссылающиеся домены | В модуле **Веб-аналитика** помимо таблицы заходов с ссылающихся сайтов есть также таблица ссылающихся доменов. Такая схема, в частности, позволяет хранить данные по ссылающимся доменам значительно дольше, чем данные по заходам в силу меньшего размера таблицы. Но даже эта таблица должна периодически очищаться. Очистка происходит по дате последнего захода с того или иного домена в зависимости от количества дней, указанных в этом поле. |
| События | |
| Сколько дней хранить каждое событие | В модуле **Веб-аналитика** существуют так называемые **типы событий** (*Аналитика > События > Типы событий*). Информация по всем событиям, происходящим на сайте и вне его пределов, хранится в таблице, которая очищается по дате того или иного события в зависимости от количества дней, указанных в данном поле. |
| Сколько дней хранить динамику типов событий | По каждому типу событий на каждый день хранится число произведенных событий того или иного типа. Эти данные хранятся в таблице, которая очищается по последней обсчитанной дате в зависимости от количества дней, указанных в данном поле. |
| Рекламные кампании | |
| Сколько дней хранить историю посетителей рекламных кампаний | Система регистрирует факты захода каждого посетителя по рекламным кампаниям. Эти данные хранятся в специальной таблице, которая периодически очищается. Очистка таблицы осуществляется спустя определённое количество дней после последнего захода данного посетителя. Данное поле задает количество дней, иначе - период очистки таблицы после последнего захода. |
| Сколько дней хранить динамику рекламных кампаний | По каждой рекламной кампании ведется отдельная таблица, в которой хранятся данные по рекламной кампании за каждый день. Эта таблица очищается по последней посчитанной дате в зависимости от количества дней, указанных в данном поле. |
| Поисковые системы | |
| Сколько дней хранить хиты поисковиков | Хитами поисковиков называются адреса проиндексированных страниц сайта. Все хиты поисковиков хранятся в отдельной таблице, которая очищается по дате последней индексации в зависимости от количества дней, указанных в данном параметре. |
| Сколько дней хранить динамику поисковиков | По каждому поисковику хранится количество проиндексированных страниц в тот или иной день. Таблица, хранящая эти данные, очищается по последней обсчитанной дате в зависимости от количества дней, указанных в этом поле. |
| Города и страны | |
| Сколько дней хранить динамику по городам | По каждому городу хранится количество визитов из него и другая информация. Таблица, хранящая эти данные, очищается по последней дате в зависимости от количества дней, указанных в этом поле. |
| Сколько дней хранить динамику по странам | По каждой стране хранится количество визитов из нее и другая информация. Таблица, хранящая эти данные, очищается по последней дате в зависимости от количества дней, указанных в этом поле. |
| Посетители | |
| Сколько дней хранить посетителей | Все посетители, заходящие на сайт, имеют собственные профили, которые хранятся в специальной таблице. Данные этой таблицы очищаются по дате последнего посещения сайта тем или иным посетителем в зависимости от количества дней, указанных в данном поле. |
| Сессии | |
| Сколько дней хранить сессии | Сессии посетителей хранятся в отдельной таблице. Каждая сессия характеризуется рядом параметров, один из которых – дата последнего хита в данной сессии, по этому параметру таблица сессий очищается в зависимости от количества дней, указанных в данном поле. |
| Хиты | |
| Сколько дней хранить хиты | Хиты (адреса загруженных страниц) хранятся в таблице, которая очищается по дате последнего хита в зависимости от количества дней, указанных в данном поле. |

### Исключения

На закладке могут быть заданы параметры, в соответствии с которыми определённые посетители могут быть исключены из статистики.

| Поле | Описание |
| --- | --- |
| Исключения сбора статистики | |
| Правила исключений | Определяет порядок исключения требуемых посетителей:  * **учитывать всех без исключения** - в базу данных статистики записываются данные по всем посетителям; * **не учитывать пользователей из заданных групп** - в базу данных статистики не включаются данные по посетителям, входящим в выбранные в следующем поле группы; * **исключить пользователей с определённых IP адресов** - не включаются данные по тем посетителям, чьи IP-адреса находятся в пределах диапазонов, указанных в поле **Список диапазонов IP адресов...**; * **исключить пользователей из определённых групп пользователей, зашедших с определённых IP адресов** - совмещение предыдущих двух условий. |
| Группы пользователей, для которых статистика НЕ собирается | Выберите группы пользователей, которые не будут учитываться при сборе статистики (т.е. по ним не будет вестись запись хитов, сессий, событий и прочих элементов статистической информации). |
| Список диапазонов IP адресов исключений (один диапазон на строке) | Пользователи, чьи IP-адреса попадают в один из указанных диапазонов, не будут учитываться при сборе статистики. Необходимо вводить один диапазон на строке.     Примеры диапазонов:  * 192.168.10.110-192.168.10.120; * 11.0.0.5-11.0.0.5 (**обратите внимание** - для задания одного адреса, введите диапазон, состоящий только из этого адреса). |

### Доступ

Закладка позволяет настроить права на доступ к модулю для всех имеющихся в системе групп пользователей.

| Поле | Описание |
| --- | --- |
| По умолчанию | Уровень доступа групп пользователей, для которых установлено право "по умолчанию". |
| [группа\_пользователей] | Изменение настроек доступа для конкретной группы. Возможно назначение следующих прав доступа к модулю **Веб-аналитика**:  * **[D] доступ закрыт** - запрет на доступ; * **[M] просмотр статистики без финансовых показателей** - просмотр статистических показателей, кроме финансовых величин доходов и убытков; * **[R] просмотр всей статистики** - просмотр всех статистических показателей, включая финансовые; * **[W] полный административный доступ** - полный доступ к ресурсам модуля (просмотр статистических показателей, права на изменение настроек и редактирование). |
| Добавить право доступа | Ссылка, позволяющая добавить дополнительное право доступа для группы пользователей. |

### Служебные процедуры

  

##### Закладка Очистка статистики

Форма позволяет очистить таблицы статистки. Исключение составляют таблица поисковиков (здесь будут сброшены только счетчики) и таблицы привязки IP-адресов к странам.

  

##### Закладка Оптимизация таблиц

Форма позволяет оптимизировать MySQL таблицы модуля **Веб-аналитика** для уменьшения их размера и увеличения производительности.

### Смотрите также

* [Настройки модуля (учебный курс "Администратор. Модули")](https://dev.1c-bitrix.ru/learning/course/index.php?COURSE_ID=41&LESSON_ID=2101)

Новинки документации в соцсетях:

#### Пользовательские комментарииПомните, что Пользовательские комментарии, несмотря на модерацию, не являются официальной документацией. Ответственность за их использование несет сам пользователь. Также Пользовательские комментарии не являются местом для обсуждения функционала. По подобным вопросам обращайтесь на [форумы](http://dev.1c-bitrix.ru/community/forums/group1/).

© «Битрикс», 2001-2025, «1С-Битрикс», 2025

Наверх